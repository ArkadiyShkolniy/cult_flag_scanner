# üéì –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

## –í–∞–∂–Ω–æ

**–û–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Git** (–æ–Ω–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ). –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

---

## –ü–æ—Ä—è–¥–æ–∫ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π

### 1. Keypoint Detection Model (–¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)

–≠—Ç–∞ –º–æ–¥–µ–ª—å –Ω—É–∂–Ω–∞ –¥–ª—è —Ä–µ–∂–∏–º–∞ "–ù–µ–π—Ä–æ—Å–µ—Ç—å —Å–∫–∞–Ω–µ—Ä" –≤ –¥–∞—à–±–æ—Ä–¥–µ —Ä–∞–∑–º–µ—Ç–∫–∏.

```bash
# –ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (WSL2 –∏–ª–∏ Linux)
cd ~/projects/invest-python-main/complex_flag_scanner

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ
docker compose exec labeling python3 neural_network/train_keypoints.py \
    --epochs 100 \
    --batch_size 16 \
    --tolerance_normalized 0.003

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç (–≤ screen —Å–µ—Å—Å–∏–∏)
./scripts/start_training.sh 100 16 0.003
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `neural_network/models/keypoint_model_best.pth`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** 
- –ù—É–∂–Ω—ã —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `neural_network/data/annotations.csv`
- –ú–∏–Ω–∏–º—É–º 100+ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---

### 2. Trading Model (Random Forest –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–¥–µ–ª–æ–∫)

–≠—Ç–∞ –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤.

#### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏–∑ —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~/projects/invest-python-main/complex_flag_scanner

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ (—Å–∏–º—É–ª—è—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
docker compose exec labeling python3 neural_network/generate_trading_dataset.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `neural_network/ml_trading_dataset.csv`

#### –®–∞–≥ 2: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

```bash
# –û–±—É—á–µ–Ω–∏–µ Random Forest –º–æ–¥–µ–ª–∏
docker compose exec labeling python3 neural_network/train_trading_model.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `neural_network/models/trading_model_rf.pkl`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ù—É–∂–µ–Ω —Ñ–∞–π–ª `ml_trading_dataset.csv` —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å–∏–º—É–ª—è—Ü–∏–π
- –ú–∏–Ω–∏–º—É–º 50+ —Å–¥–µ–ª–æ–∫ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–µ–π
ls -lh neural_network/models/

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - keypoint_model_best.pth (–¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —Å–∫–∞–Ω–µ—Ä–∞)
# - trading_model_rf.pkl (–¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –º–æ–¥–µ–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

### Keypoint Model –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
- **–†–µ–∂–∏–º "–ù–µ–π—Ä–æ—Å–µ—Ç—å —Å–∫–∞–Ω–µ—Ä" –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫–∞–Ω–µ—Ä" –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
- –ò–ª–∏ –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å (—Å–º. –≤—ã—à–µ)

### Trading Model –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
- **–¢–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ë–ï–ó AI —Ñ–∏–ª—å—Ç—Ä–∞**
- –í `docker-compose.yml` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `USE_AI_FILTER=False`
- –ò–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥–∞—Ç–∞—Å–µ—Ç –∏ –æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

```bash
nano ~/setup_models.sh
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```bash
#!/bin/bash
cd ~/projects/invest-python-main/complex_flag_scanner

echo "üéì –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö
if [ ! -f "neural_network/data/annotations.csv" ]; then
    echo "‚ö†Ô∏è  –§–∞–π–ª annotations.csv –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–ø—É—Å–∫–∞—é –æ–±—É—á–µ–Ω–∏–µ keypoint –º–æ–¥–µ–ª–∏."
else
    echo "1Ô∏è‚É£ –û–±—É—á–µ–Ω–∏–µ Keypoint Detection Model..."
    docker compose exec labeling python3 neural_network/train_keypoints.py \
        --epochs 100 --batch_size 16 --tolerance_normalized 0.003
fi

# –û–±—É—á–µ–Ω–∏–µ Trading Model (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
if [ -f "neural_network/data/annotations.csv" ]; then
    echo "2Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è trading dataset..."
    docker compose exec labeling python3 neural_network/generate_trading_dataset.py
    
    echo "3Ô∏è‚É£ –û–±—É—á–µ–Ω–∏–µ Trading Model..."
    docker compose exec labeling python3 neural_network/train_trading_model.py
fi

echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
```

–°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
chmod +x ~/setup_models.sh
```

---

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

–•–æ—Ç—è –º–æ–¥–µ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Git, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å backup:

```bash
# –°–æ–∑–¥–∞—Ç—å backup
tar -czf backup_models_$(date +%Y%m%d).tar.gz neural_network/models/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
tar -xzf backup_models_YYYYMMDD.tar.gz
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å 50-200MB –∫–∞–∂–¥–∞—è. Git –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Ç–∞–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.
